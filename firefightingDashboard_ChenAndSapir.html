<!DOCTYPE html>
<meta charset="utf-8">
    <style>
	.axis-grid line {
	stroke: #F0F0F0;
}
</style>
<!-- Load d3.js & color palette-->
<script src="https://d3js.org/d3.v4.js"></script>
<script src="http://code.jquery.com/jquery-1.7.1.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>

<!-- Create the buttons -->
<button id="All" onClick="verticalBarChart(this.id),lineChart(this.id)">All</button>
<button id="Dan" onClick="verticalBarChart(this.id),lineChart(this.id)">Dan</button>
<button id="South" onClick="verticalBarChart(this.id),lineChart(this.id)">South</button>
<button id="CoastalPlain" onClick="verticalBarChart(this.id,lineChart(this.id))">Coastal Plain</button>
<button id="JudeaAndSamaria" onClick="verticalBarChart(this.id),lineChart(this.id)">Judea & Samaria</button>
<button id="Jerusalem" onClick="verticalBarChart(this.id),lineChart(this.id)">Jerusalem</button>
<button id="Center" onClick="verticalBarChart(this.id),lineChart(this.id)">Center</button>
<button id="North" onClick="verticalBarChart(this.id),lineChart(this.id)">North</button>

<!-- Declare the function that the buttons will use -->
<script>function verticalBarChart(id){}</script>
<script>function lineChart(id){}</script>
<p id="chart">
<p id="rawdata">

<!-- Create a div where the graph will take place -->
<div id="my_dataviz"></div>
<div id="svg2"></div>
<script>
//Set the dimensions and margins of the graph
var margin = {top: 80, right: 70, bottom: 70, left: 90},
    width = 570 - margin.left - margin.right,
    height = 470 - margin.top - margin.bottom;
	
d3.select("#my_dataviz").style("background-color", "#FFFFE0");
d3.select("#svg2").style("background-color", "#FFFFE0");
d3.select("#All").style("background-color", "#fee391");
d3.select("#Dan").style("background-color", "#fee391");
d3.select("#South").style("background-color", "#fee391");
d3.select("#CoastalPlain").style("background-color", "#fee391");
d3.select("#JudeaAndSamaria").style("background-color", "#fee391");
d3.select("#Jerusalem").style("background-color", "#fee391");
d3.select("#Center").style("background-color", "#fee391");
d3.select("#North").style("background-color", "#fee391");


//Append the svg object to the body of the page
var svg = d3.select("#my_dataviz")
  .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform","translate(" + margin.left + "," + margin.top + ")");

//Append the svg object to the body of the page
 var svg2 = d3.select("#svg2")
  .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")");

	//Main title
	svg.append("text")
			.attr("x", width-10)
			.attr("y", height-378)
			.attr("text-anchor", "middle")
			.style("font-family", "Cooper Black")
			.style("font-size", 25)
			.style("font-weight", "bold")
			.style('fill', '#e31a1c')
			.text("Firefighting");

verticalBarChart('default'); //Call the function with the default case so the vizualization will be seen
horizontalBarChart();
lineChart('default');
scatter();

function verticalBarChart(id) {	
//Data from the .csv file
d3.csv("Data5.csv", function (data){
  //List of subgroups, meaning, the headers of the relevant columns in the csv file
  var subgroups=data.columns.slice(1,6);
 
		switch (id) {
		case 'All': //Button "All" was pushed
				//Graph main title
				svg.select("#graphTitle").remove(); 
				svg.append("text")
					.attr("id", "graphTitle")
					.attr("x", width-210)
					.attr("y", height-340)
					.attr("text-anchor", "middle")
					.style("font-family", "Calibri Light")
					.style("font-size", 17)
					.style("font-weight", "bold")
					.text("Qty of Events per Month and Event Type");
				d3.selectAll(".myRect").remove();
				subgroups = data.columns.slice(1,6);
			break;
		case 'Dan': //Button "Dan" was pushed
				//Graph main title
				svg.select("#graphTitle").remove(); 
				svg.append("text")
					.attr("id", "graphTitle")
					.attr("x", width-210)
					.attr("y", height-340)
					.attr("text-anchor", "middle")
					.style("font-family", "Calibri Light")
					.style("font-size", 17)
					.style("font-weight", "bold")
					.text("Qty of Events per Month and Event Type - Dan");
				d3.selectAll(".myRect").remove(); 
				subgroups = data.columns.slice(7,12);
			break;
		case 'South': //Button "South" was pushed
				//Graph main title
				svg.select("#graphTitle").remove(); 
				svg.append("text")
					.attr("id", "graphTitle")
					.attr("x", width-210)
					.attr("y", height-340)
					.attr("text-anchor", "middle")
					.style("font-family", "Calibri Light")
					.style("font-size", 17)
					.style("font-weight", "bold")
					.text("Qty of Events per Month and Event Type - South");
				d3.selectAll(".myRect").remove(); 
				subgroups = data.columns.slice(12,17);
			break;
		case 'CoastalPlain': //Button "CoastalPlain" was pushed
				//Graph main title
				svg.select("#graphTitle").remove(); 
				svg.append("text")
					.attr("id", "graphTitle")
					.attr("x", width-210)
					.attr("y", height-340)
					.attr("text-anchor", "middle")
					.style("font-family", "Calibri Light")
					.style("font-size", 17)
					.style("font-weight", "bold")
					.text("Qty of Events per Month and Event Type - Coastal Plain");
				d3.selectAll(".myRect").remove(); 
				subgroups = data.columns.slice(17,22);
			break;
		case 'JudeaAndSamaria': //Button "JudeaAndSamaria" was pushed
				//Graph main title
				svg.select("#graphTitle").remove(); 
				svg.append("text")
					.attr("id", "graphTitle")
					.attr("x", width-210)
					.attr("y", height-340)
					.attr("text-anchor", "middle")
					.style("font-family", "Calibri Light")
					.style("font-size", 17)
					.style("font-weight", "bold")
					.text("Qty of Events per Month and Event Type - Judea and Samaria");
				d3.selectAll(".myRect").remove(); 
				subgroups = data.columns.slice(22,27);
			break;
		case 'Jerusalem': //Button "Jerusalem" was pushed
				//Graph main title
				svg.select("#graphTitle").remove(); 
				svg.append("text")
					.attr("id", "graphTitle")
					.attr("x", width-210)
					.attr("y", height-340)
					.attr("text-anchor", "middle")
					.style("font-family", "Calibri Light")
					.style("font-size", 17)
					.style("font-weight", "bold")
					.text("Qty of Events per Month and Event Type - Jerusalem");
				d3.selectAll(".myRect").remove(); 
				subgroups = data.columns.slice(27,32);
			break;
		case 'Center': //Button "Center" was pushed
				//Graph main title
				svg.select("#graphTitle").remove(); 
				svg.append("text")
					.attr("id", "graphTitle")
					.attr("x", width-210)
					.attr("y", height-340)
					.attr("text-anchor", "middle")
					.style("font-family", "Calibri Light")
					.style("font-size", 17)
					.style("font-weight", "bold")
					.text("Qty of Events per Month and Event Type - Center");
				d3.selectAll(".myRect").remove(); 
				subgroups = data.columns.slice(32,37);
			break;
		case 'North': //Button "North" was pushed
				//Graph main title
				svg.select("#graphTitle").remove(); 
				svg.append("text")
					.attr("id", "graphTitle")
					.attr("x", width-210)
					.attr("y", height-340)
					.attr("text-anchor", "middle")
					.style("font-family", "Calibri Light")
					.style("font-size", 17)
					.style("font-weight", "bold")
					.text("Qty of Events per Month and Event Type - North");
				d3.selectAll(".myRect").remove(); 
				subgroups = data.columns.slice(37,42);
			break;
		case 'default': //default case was pushed
				//Graph main title
				svg.append("text")
					.attr("id", "graphTitle")
					.attr("x", width-210)
					.attr("y", height-340)
					.attr("text-anchor", "middle")
					.style("font-family", "Calibri Light")
					.style("font-size", 17)
					.style("font-weight", "bold")
					.text("Qty of Events per Month and Event Type");
				subgroups = data.columns.slice(1,6);
			break;
			};

  //List of groups, meaning, the values of the first column ("EventMonth") which will be the values in X axis
  var groups = d3.map(data, function(d){return(d.EventMonth)}).keys()

  //Add X axis
  var x = d3.scaleBand()
      .domain(groups)
      .range([0, width])
      .padding([0.2])
  svg.append("g")
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(x).tickSizeOuter(0));

  //Add Y axis
  var y = d3.scaleLinear()
    .domain([0, 16000])
    .range([ height, 0 ]);
  svg.append("g")
    .call(d3.axisLeft(y));
	
  //Create grids
  svg.append('g')
	  .attr('class', 'x axis-grid')
	  .attr('transform', 'translate(0,' + height + ')')
	  .call(d3.axisBottom(x).tickSize(-height).tickFormat('').ticks(10));
  svg.append('g')
	  .attr('class', 'y axis-grid')
	  .call(d3.axisLeft(y).tickSize(-width).tickFormat('').ticks(10));
  
  //Colors, one color per subgroup
  var color = d3.scaleOrdinal()
		.domain(subgroups)
		.range(['#cc79a7','#0072b2',' #f0e442', '#009e73', '#d55e00']);

  //Stack the data per subgroup in order to make stacked bar chart
  var stackedData = d3.stack()
    .keys(subgroups)
    (data)

  //Create the tooltip
  var tooltip = d3.select("#my_dataviz")
		.append("div")
		.style("opacity", 0)
		.attr("class", "tooltip")
		.style("position", "absolute")
		.style("background-color", "#fed976")
		.style("padding", "8px")
		.style("font-size", "15px")
		.style("font-weight", "bold")
		.style("font-family", "Calibri Light")
		.style("pointer-events", "none");


  //Hover on
  //Create the tooltip + hover (highlight a specific subgroup when hovered)
  var mouseover = function(d) {
  var subgroupName = d3.select(this.parentNode).datum().key;
  var subgroupValue = d.data[subgroupName];
  //The tooltip with the data
  tooltip
        .html("Event type: " + subgroupName + "<br>" + "Number of events for month " + d.data.EventMonth + ": " + subgroupValue)
        .style("opacity", 1)
		.style("left", event.clientX -100 +"px")
		.style("top", event.clientY - 100+"px");
  //Reduce opacity of all rect to 0.2
  d3.selectAll(".myRect").style("opacity", 0.2)
  //Highlight all rects of this subgroup with opacity 0.8 (They have a specific class which is their name)
  d3.selectAll("."+subgroupName)
		.style("opacity", 1)
  //Highlight the specific data that the mouse is standing on with black frame
  d3.select(this)
		.transition()
		.style("stroke", "black")
		.style("stroke-width", "3px");

  }//function mouseover

  //Hover off
  var mouseleave = function(d) {
  //Back to normal opacity: 0.8
  d3.selectAll(".myRect")
		.style("opacity",1)
  tooltip
		.style("opacity", 0)
  //Removes the black frame
  d3.select(this)
		.transition()
		.style("stroke", "none");
  }//function mouseleave

  //Graph bars
  svg.append("g")
		.selectAll("g")
 //Enter in the stack data = loop key per key = group per group
		.data(stackedData)
		.enter().append("g")
		.attr("fill", function(d) { return color(d.key); })
		.attr("class", function(d){ return "myRect " + d.key }) //Add a class to each subgroup: their name
		.selectAll("rect")
  //Enter a second time = loop subgroup per subgroup to add all rectangles
		.data(function(d) { return d; })
		.enter().append("rect")
        .attr("x", function(d) { return x(d.data.EventMonth); })
        .attr("y", function(d) { return y(d[1]); })
        .attr("height", function(d) { return y(d[0]) - y(d[1]); })
        .attr("width",x.bandwidth())
        .attr("stroke", "grey")
		.on("mouseover", mouseover)
		.on("mouseleave", mouseleave)
		
	//X-Axis label
	svg.append("text")
			.attr("x", (width/2))
            .attr("y", height+40)  
			.attr("text-anchor", "middle")				
			.style("font-family", "Calibri Light")
			.style("font-size", 13)
			.style("font-weight", "bold")
			.text("Month");				
				
	//Y-Axis label
	svg.append("text")
			.attr("y", -margin.left+45)
				.attr("x", -margin.top-60)
				.attr("transform", "rotate(-90)")
			.attr('text-anchor', 'middle')
			.style("font-family", "Calibri Light")
			.style("font-size", 13)
			.style("font-weight", "bold")
			.text("Qty of Events");	

})//csv file
}//verticalBarChart

//*****************************************************************************************************************************************
//*****************************************************************************************************************************************

function horizontalBarChart(id) {
//Set the dimensions and margins of the graph
var margin = {top: 80, right: 70, bottom: 70, left: 90},
    width = 570 - margin.left - margin.right,
    height = 470 - margin.top - margin.bottom;
	
//Append the svg object to the body of the page
var svg = d3.select("#my_dataviz")
  .append("svg")
    .attr("width", width +200)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform","translate(" + margin.left + "," + margin.top + ")"); 
//Data from the .csv file
d3.csv("Data5.csv", function (data){
  //List of subgroups, meaning, the headers of the relevant columns in the csv file
  var subgroups=data.columns.slice(50,55);
  //List of groups, meaning, the values of the first column ("Disctrict") which will be the values in Y axis
  var groups = d3.map(data, function(d){return(d.Disctrict)}).keys()
  groups.pop();

  //Add X axis
  var x = d3.scaleLinear()
		.domain([0, 22000])
		.range([0, width]);
  svg.append("g")
		.attr("transform", "translate(0," + height + ")")
		.call(d3.axisBottom(x).tickSizeOuter(0));

  //Add Y axis
  var y = d3.scaleBand()
		.domain(groups)
		.range([ 0, height ])
		.padding([0.2]);
  svg.append("g")
		.call(d3.axisLeft(y));
	
  //Create grids
  svg.append('g')
	  .attr('class', 'x axis-grid')
	  .attr('transform', 'translate(0,' + height + ')')
	  .call(d3.axisBottom(x).tickSize(-height).tickFormat('').ticks(7));
  svg.append('g')
	  .attr('class', 'y axis-grid')
	  .call(d3.axisLeft(y).tickSize(-width).tickFormat('').ticks(7));
  
  //Colors, one color per subgroup
  var color = d3.scaleOrdinal()
		.domain(subgroups)
		.range(['#cc79a7','#0072b2',' #f0e442', '#009e73', '#d55e00']);

  //Stack the data per subgroup in order to make stacked bar chart
  var stackedData = d3.stack()
		.keys(subgroups)
		(data)

  //Create the tooltip
  var tooltip = d3.select("#my_dataviz")
		.append("div")
		.style("opacity", 0)
		.attr("class", "tooltip")
		.style("position", "absolute")
		.style("background-color", "#fed976")
		.style("padding", "8px")
		.style("font-size", "15px")
		.style("font-weight", "bold")
		.style("font-family", "Calibri Light")
		.style("pointer-events", "none");

  //Hover on
  //Create the tooltip + hover (highlight a specific subgroup when hovered)
  var mouseover = function(d) {
  var subgroupName = d3.select(this.parentNode).datum().key;
  var subgroupValue = d.data[subgroupName];
  //The tooltip with the data
  tooltip
        .html("The number of " + subgroupName + " Events in " + d.data.Disctrict + " is: " + subgroupValue)
        .style("opacity", 1)
		.style("left", event.clientX + "px")
		.style("top", event.clientY +"px");
  //Reduce opacity of all rect to 0.2
  d3.selectAll(".myRectt").style("opacity", 0.2)
  //Highlight all rects of this subgroup with opacity 0.8 (They have a specific class which is their name)
  d3.selectAll("."+subgroupName)
		.style("opacity", 1)
  //Highlight the specific data that the mouse is standing on with black frame
  d3.select(this)
		.transition()
		.duration(150)
		.style("stroke", "black")
		.style("stroke-width", "3px")
    }//function mouseover
	
  //Hover off
  var mouseleave = function(d) {
  //Back to normal opacity: 0.8
  d3.selectAll(".myRectt")
		.style("opacity",1)
  tooltip
		.style("opacity", 0)
  //Removes the black frame
  d3.select(this)
		.transition()
		.duration(100)
		.style("stroke", "none");
  }//function mouseleave

  //Graph bars
 svg.append("g")
		.selectAll("g")
  //Enter in the stack data = loop key per key = group per group
		.data(stackedData)
		.enter().append("g")
		.attr("fill", function(d) { return color(d.key); })
		.attr("class", function(d){ return "myRectt " + d.key }) //Add a class to each subgroup: their name
		.selectAll("rect")
  //Enter a second time = loop subgroup per subgroup to add all rectangles
		.data(function(d) { return d; })
		.enter().append("rect")
        .attr("x", function(d) { return x(d[0]); })
        .attr("y", function(d) { return y(d.data.Disctrict); })
        .attr("height", y.bandwidth())
        .attr("width",function(d) { return x(d[1]) - x(d[0]); })
        .attr("stroke", "grey")
		.on("mouseover", mouseover)
		.on("mouseleave", mouseleave)
	  
	//Add labels to each bar
	svg.selectAll(".text")        
		.data(data)
		.enter()
		.append("text")
		.attr("class","label")
		.attr("y", function(d, i) {  return i *1.74* (height / data.length)+20;})
		.attr("x", function(d){ return x(d.Total)+8; })
		.attr("dy", ".20em")
		.text(function(d) { return d.Total; })
		.style("font-family", "Calibri Light")
		.style("font-size", 12);  
			
	//Graph main title
	svg.append("text")
		.attr("x", width-210)
		.attr("y", height-340)
		.attr("text-anchor", "middle")
		.style("font-family", "Calibri Light")
		.style("font-size", 17)
		.style("font-weight", "bold")
		.text("Qty of Events per Disctrict");
		
	//X-Axis label
		svg.append("text")
			.attr("x", (width/2))
            .attr("y", height+40)  
			.attr("text-anchor", "middle")				
			.style("font-family", "Calibri Light")
			.style("font-size", 13)
			.style("font-weight", "bold")
			.text("Qty of Events");				
				
	//Y-Axis label
		svg.append("text")
			.attr("x", width-410)
			.attr("y", height-330)
			//.attr("transform", "rotate(-90)")
			.attr('text-anchor', 'middle')
			.style("font-family", "Calibri Light")
			.style("font-size", 13)
			.style("font-weight", "bold")
			.text("District");	
				
	//Legend
	var variables = ["Security", "Hazardous_Materials", "Extrication", "Unknown", "Fire"];
    var colors = d3.scaleOrdinal()
            .domain(variables)
			.range(['#cc79a7','#0072b2',' #f0e442', '#009e73', '#d55e00']);

	//Legend circles
    svg.selectAll("circles")
              .data(variables)
              .enter()
              .append("circle")
              .attr("cx", width+13)
              .attr("cy", function(d,i){ return i*15-72})
              .attr("r", 3)
              .style("fill", function(d){ return colors(d)});

	//Legend labels
    svg.selectAll("labels")
              .data(variables)
              .enter()
              .append("text")
              .attr("x", width+23)
			  .attr("y", function(d,i){ return i*15-72})
              .style("fill", function(d,i){ return colors(d)})
              .text(function(d){ return d})
              .attr("text-anchor", "left")
			  .style("font-family", "Calibri Light")
              .style("alignment-baseline", "middle")
			  .style("font-weight", "bold")
              .style("font-size", "10px");
			  
	//Legend frame
	svg.selectAll("frame")
			.data(variables)
			.enter()
			.append("rect")
			.attr("x", width+8)
			.attr("y", height-400)
			.attr("width", 101)
			.attr("height", 75)
			.style("stroke", "black")
			.style("fill", "none");

//Main title
	svg.append("text")
			.attr("x", width-340)
			.attr("y", height-378)
			.attr("text-anchor", "middle")
			.style("font-family", "Cooper Black")
			.style("font-size", 25)
			.style("font-weight", "bold")
			.style('fill', '#e31a1c')
			.text("Events Dashboard - 2021");
			
			//note1
			svg.append("text")
				.attr("x", width+10)
				.attr("y", height-305)
				.attr("text-anchor", "right")
				.style("font-family", "Calibri Light")
				.style("font-size", 12)
				.text("The legend relevant ");
				
			//note2
			svg.append("text")
				.attr("x", width+10)
				.attr("y", height-295)
				.attr("text-anchor", "right")
				.style("font-family", "Calibri Light")
				.style("font-size", 12)
				.text("for both stacked ");
			
			//note3	
			svg.append("text")
				.attr("x", width+10)
				.attr("y", height-285)
				.attr("text-anchor", "right")
				.style("font-family", "Calibri Light")
				.style("font-size", 12)
				.text("bar-charts.");

})//csv file
}//horizontalBarChart


//*****************************************************************************************************************************************
//*****************************************************************************************************************************************

function lineChart(id) {
//Set the dimensions and margins of the graph
var margin = {top: 80, right: 70, bottom: 70, left: 90},
    width = 570 - margin.left - margin.right,
    height = 470 - margin.top - margin.bottom;

//Data from the .csv file
d3.csv("Events_Lines_2.csv", function(data) {
  //Group the data in order to have one line per group
  var sumstat = d3.nest() //Nest function allows to group the calculation per level of a factor
    .key(function(d) { return d.District;})
    .entries(data);

  //List of groups, meaning, the values of the first column ("EventMonth") which will be the values in X axis
  var groups = d3.map(data, function(d){return(d.EventMonth)}).keys()

  //Add X axis
  var x = d3.scaleBand()
      .domain(groups)
      .range([0, width])
      .padding([0.2])
  svg2.append("g")
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(x).tickSizeOuter(0));

  //Add Y axis
  var y = d3.scaleLinear()
    .domain([0, d3.max(data, function(d) { return +d.Events; })])
    .range([ height, 0 ]);
  svg2.append("g")
    .call(d3.axisLeft(y));
	   
  //Colors, one color per subgroup
  var res = sumstat.map(function(d){ return d.key }) // list of group names
  var color = d3.scaleOrdinal()
    .domain(res)
    .range(['#999999','#56B4E9','#009E73','#F0E442','#0072B2','#D55E00','#ff6db6'])

		//Define the div for the tooltip
			var div = d3.select("body").append("div")	
				.attr("class", "tooltip")				
				.style("opacity", 0);
				
		//X-Axis label
		svg2.append("text")
				.attr("x", (width/2))
                .attr("y", height+40)  
				.attr("text-anchor", "middle")				
				.style("font-family", "Calibri Light")
				.style("font-size", 13)
				.style("font-weight", "bold")
				.text("Month");				
				
		//Y-Axis label
		svg2.append("text")
				.attr("transform", "rotate(-90)")
				.attr("y", -margin.left+45)
				.attr("x", -margin.top-60)
				.attr('text-anchor', 'middle')
				.style("font-family", "Calibri Light")
				.style("font-size", 13)
				.style("font-weight", "bold")
				.text("Qty of Events");	
						
	//Legend
	var variables = ["Dan", "South", "Coastal Plain", "Judea & Samaria", "Jerusalem","Center","North"];
    var colors = d3.scaleOrdinal()
            .domain(variables)
			.range(['#999999','#56B4E9','#009E73','#F0E442','#0072B2','#D55E00','#ff6db6']);

//Create the tooltip
  var tooltip = d3.select("#svg2")
		.append("div")
		.style("opacity", 0)
		.attr("class", "tooltip")
		.style("position", "absolute")
		.style("background-color", "#fed976")
		.style("padding", "8px")
		.style("font-size", "15px")
		.style("font-weight", "bold")
		.style("font-family", "Calibri Light") 
		.style("pointer-events", "none");

  //Hover on
  //Create the tooltip + hover (highlight a specific subgroup when hovered)
  var mouseover = function(d) {
 //The tooltip with the data
  tooltip
        .html("District: " + d.District + "<br/>" + "Month: " + d.EventMonth + "<br/>"  + "Number Of Events: " + d.Events)	
        .style("opacity", 1)
		.style("left", event.clientX -100+ "px")
		.style("top", event.clientY +220+"px");
  //Highlight the specific data that the mouse is standing on with black frame
  d3.select(this)
		.transition()
		.duration(100)
		.style("stroke", "black")
		.style("stroke-width", "3px");
    }//function mouseover
	
  //Hover off
  var mouseleave = function(d) {
  tooltip
		.style("opacity", 0);
  //Removes the black frame
  d3.select(this)
		.transition()
		.duration(100)
		.style("stroke", "none");
  }//function mouseleave
  
//Cases for the buttons
switch (id) {
	case 'All': //Button "All" was pushed
		//Graph main title
		svg2.select("#graphTitle").remove(); 
		svg2.append("text")
			.attr("id", "graphTitle")
			.attr("x", width-210)
			.attr("y", height-340)
			.attr("text-anchor", "middle")
			.style("font-family", "Calibri Light")
			.style("font-size", 17)
			.style("font-weight", "bold")
			.text("Events Trend By District");
		svg2.selectAll(".line")
			.data(sumstat)
			.enter()
			.append("path")
			.attr("fill", "none")
			.attr("stroke", function(d){ return color(d.key) })
			.attr("stroke-width", 1.5)
			.attr("d", function(d){
			  return d3.line()
				.x(function(d) { return x(d.EventMonth); })
				.y(function(d) { return y(d.Events); })
				(d.values)
			});
		svg2.selectAll("dot")
			.data(data)			
			.enter().append("circle")								
			.attr("r", 2)
			.attr("fill", function(d){ return color(d.District)})
			.attr("cx", function(d) { return x(d.EventMonth); })		 
			.attr("cy", function(d) { return y(d.Events); })		
			.on("mouseover", mouseover)				
			.on("mouseleave", mouseleave);
	break;
	case 'Dan': //Button "Dan" was pushed
		//Graph main title
		svg2.select("#graphTitle").remove(); 
		svg2.append("text")
				.attr("id", "graphTitle")
				.attr("x", width-210)
				.attr("y", height-340)
				.attr("text-anchor", "middle")
				.style("font-family", "Calibri Light")
				.style("font-size", 17)
				.style("font-weight", "bold")
				.text("Events Trend By District - Dan");
		svg2.selectAll(".line") //Delete the not relevant lines
				.data(sumstat)
				.enter()
				.append("path")
				.attr("fill", "#FFFFE0")
				.attr("stroke", "#FFFFE0")
				.attr("stroke-width", 3)
				.attr("d", function(d){
				  return d3.line()
					.x(function(d) { return x(d.EventMonth); })
					.y(function(d) { return y(+d.Events); })
					(d.values)
				});
		svg2.selectAll("dot") //Delete the not relevant dots
			.data(data)			
			.enter().append("circle")								
			.attr("r", 3)
			.attr("fill", "#FFFFE0")
			.attr("stroke", "#FFFFE0")
			.attr("cx", function(d) { return x(d.EventMonth); })		 
			.attr("cy", function(d) { return y(d.Events); })	;
		svg2.selectAll(".line") //Add only the line of 'Dan' group
			.data(sumstat)
			.enter()
			.append("path")
			.attr("fill", "none")
			.attr("stroke", function(d){ return color('Dan') })
			.attr("stroke-width", 1.5)	
			.attr("d", function(d){
			  return d3.line()
				.x(function(d) { return x(d.EventMonth); })
				.y(function(d) { return y(+d.Events); })
				(data.filter(function(d){return d.District=='Dan'}))
			})	
	break;
	case 'South': //Button "Dan" was pushed
		//Graph main title
		svg2.select("#graphTitle").remove(); 
		svg2.append("text")
				.attr("id", "graphTitle")
				.attr("x", width-210)
				.attr("y", height-340)
				.attr("text-anchor", "middle")
				.style("font-family", "Calibri Light")
				.style("font-size", 17)
				.style("font-weight", "bold")
				.text("Events Trend By District - South");
		svg2.selectAll(".line") //Delete the not relevant lines
		    .data(sumstat)
		    .enter()
		    .append("path")
			.attr("fill", "#FFFFE0")
			.attr("stroke", "#FFFFE0")
			.attr("stroke-width", 3)
			.attr("d", function(d){
			  return d3.line()
				.x(function(d) { return x(d.EventMonth); })
				.y(function(d) { return y(+d.Events); })
				(d.values)
			});
		svg2.selectAll("dot") //Delete the not relevant dots
			.data(data)			
			.enter().append("circle")								
			.attr("r", 3)
			.attr("fill", "#FFFFE0")
			.attr("stroke", "#FFFFE0")
			.attr("cx", function(d) { return x(d.EventMonth); })		 
			.attr("cy", function(d) { return y(d.Events); })	;
		svg2.selectAll(".line") //Add only the line of 'South' group
		    .data(sumstat)
		    .enter()
		    .append("path")
			.attr("fill", "none")
			.attr("stroke", function(d){ return color('South') })
			.attr("stroke-width", 1.5)
			.attr("d", function(d){
			  return d3.line()
				.x(function(d) { return x(d.EventMonth); })
				.y(function(d) { return y(+d.Events); })
				(data.filter(function(d){return d.District=='South'}))
				
			})	
	break;
	case 'CoastalPlain': //Button "CoastalPlain" was pushed
		//Graph main title
		svg2.select("#graphTitle").remove(); 
		svg2.append("text")
				.attr("id", "graphTitle")
				.attr("x", width-210)
				.attr("y", height-340)
				.attr("text-anchor", "middle")
				.style("font-family", "Calibri Light")
				.style("font-size", 17)
				.style("font-weight", "bold")
				.text("Events Trend By District - Coastal Plain");
		svg2.selectAll(".line") //Delete the not relevant lines
		    .data(sumstat)
		    .enter()
		    .append("path")
			.attr("fill", "#FFFFE0")
			.attr("stroke", "#FFFFE0")
			.attr("stroke-width", 3)
			.attr("d", function(d){
			  return d3.line()
				.x(function(d) { return x(d.EventMonth); })
				.y(function(d) { return y(+d.Events); })
				(d.values)
			});
		svg2.selectAll("dot") //Delete the not relevant dots	
			.data(data)			
			.enter().append("circle")								
			.attr("r", 3)
			.attr("fill", "#FFFFE0")
			.attr("stroke", "#FFFFE0")
			.attr("cx", function(d) { return x(d.EventMonth); })		 
			.attr("cy", function(d) { return y(d.Events); })	;
		svg2.selectAll(".line") //Add only the line of 'CoastalPlain' group
		    .data(sumstat)
		    .enter()
		    .append("path")
			.attr("fill", "none")
			.attr("stroke", function(d){ return color('CoastalPlain') })
			.attr("stroke-width", 1.5)
			.attr("d", function(d){
			  return d3.line()
				.x(function(d) { return x(d.EventMonth); })
				.y(function(d) { return y(+d.Events); })
				(data.filter(function(d){return d.District=='CoastalPlain'}))
				
			})		
	break;
	case 'JudeaAndSamaria': //Button "JudeaAndSamaria" was pushed
		//Graph main title
		svg2.select("#graphTitle").remove(); 
		svg2.append("text")
				.attr("id", "graphTitle")
				.attr("x", width-210)
				.attr("y", height-340)
				.attr("text-anchor", "middle")
				.style("font-family", "Calibri Light")
				.style("font-size", 17)
				.style("font-weight", "bold")
				.text("Events Trend By District - Judea and Samaria");
		svg2.selectAll(".line") //Delete the not relevant lines
		    .data(sumstat)
		    .enter()
		    .append("path")
			.attr("fill", "#FFFFE0")
			.attr("stroke", "#FFFFE0")
			.attr("stroke-width", 3)
			.attr("d", function(d){
			  return d3.line()
				.x(function(d) { return x(d.EventMonth); })
				.y(function(d) { return y(+d.Events); })
				(d.values)
			});
		svg2.selectAll("dot") //Delete the not relevant dots	
			.data(data)			
			.enter().append("circle")								
			.attr("r", 3)
			.attr("fill", "#FFFFE0")
			.attr("stroke", "#FFFFE0")
			.attr("cx", function(d) { return x(d.EventMonth); })		 
			.attr("cy", function(d) { return y(d.Events); })	;
		svg2.selectAll(".line") //Add only the line of 'JudeaAndSamaria' group
		    .data(sumstat)
		    .enter()
		    .append("path")
			.attr("fill", "none")
			.attr("stroke", function(d){ return color('JudeaAndSamaria') })
			.attr("stroke-width", 1.5)
			.attr("d", function(d){
			  return d3.line()
				.x(function(d) { return x(d.EventMonth); })
				.y(function(d) { return y(+d.Events); })
				(data.filter(function(d){return d.District=='JudeaAndSamaria'}))
				
			})	
	break;
	case 'Jerusalem': //Button "Jerusalem" was pushed
		//Graph main title
		svg2.select("#graphTitle").remove(); 
		svg2.append("text")
				.attr("id", "graphTitle")
				.attr("x", width-210)
				.attr("y", height-340)
				.attr("text-anchor", "middle")
				.style("font-family", "Calibri Light")
				.style("font-size", 17)
				.style("font-weight", "bold")
				.text("Events Trend By District - Jerusalem");
		svg2.selectAll(".line") //Delete the not relevant lines
		    .data(sumstat)
		    .enter()
		    .append("path")
			.attr("fill", "#FFFFE0")
			.attr("stroke", "#FFFFE0")
			.attr("stroke-width", 3)
			.attr("d", function(d){
			  return d3.line()
				.x(function(d) { return x(d.EventMonth); })
				.y(function(d) { return y(+d.Events); })
				(d.values)
			});
		svg2.selectAll("dot") //Delete the not relevant dots	
			.data(data)			
			.enter().append("circle")								
			.attr("r", 3)
			.attr("fill", "#FFFFE0")
			.attr("stroke", "#FFFFE0")
			.attr("cx", function(d) { return x(d.EventMonth); })		 
			.attr("cy", function(d) { return y(d.Events); })	;
		svg2.selectAll(".line") //Add only the line of 'Jerusalem' group
		    .data(sumstat)
		    .enter()
		    .append("path")
			.attr("fill", "none")
			.attr("stroke", function(d){ return color('Jerusalem') })
			.attr("stroke-width", 1.5)
			.attr("d", function(d){
			  return d3.line()
				.x(function(d) { return x(d.EventMonth); })
				.y(function(d) { return y(+d.Events); })
				(data.filter(function(d){return d.District=='Jerusalem'}))
				
			})
	break;
	case 'Center': //Button "Center" was pushed
		//Graph main title
		svg2.select("#graphTitle").remove(); 
		svg2.append("text")
				.attr("id", "graphTitle")
				.attr("x", width-210)
				.attr("y", height-340)
				.attr("text-anchor", "middle")
				.style("font-family", "Calibri Light")
				.style("font-size", 17)
				.style("font-weight", "bold")
				.text("Events Trend By District - Center");
		svg2.selectAll(".line") //Delete the not relevant lines
		    .data(sumstat)
		    .enter()
		    .append("path")
			.attr("fill", "#FFFFE0")
			.attr("stroke", "#FFFFE0")
			.attr("stroke-width", 3)
			.attr("d", function(d){
			  return d3.line()
				.x(function(d) { return x(d.EventMonth); })
				.y(function(d) { return y(+d.Events); })
				(d.values)
			});
		svg2.selectAll("dot") //Delete the not relevant dots
			.data(data)			
			.enter().append("circle")								
			.attr("r", 3)
			.attr("fill", "#FFFFE0")
			.attr("stroke", "#FFFFE0")
			.attr("cx", function(d) { return x(d.EventMonth); })		 
			.attr("cy", function(d) { return y(d.Events); })	;
		svg2.selectAll(".line") //Add only the line of 'Center' group
		    .data(sumstat)
		    .enter()
		    .append("path")
			.attr("fill", "none")
			.attr("stroke", function(d){ return color('Center') })
			.attr("stroke-width", 1.5)
			.attr("d", function(d){
			  return d3.line()
				.x(function(d) { return x(d.EventMonth); })
				.y(function(d) { return y(+d.Events); })
				(data.filter(function(d){return d.District=='Center'}))
				
			})
	break;
	case 'North': //Button "North" was pushed
		//Graph main title
		svg2.select("#graphTitle").remove(); 
		svg2.append("text")
				.attr("id", "graphTitle")
				.attr("x", width-210)
				.attr("y", height-340)
				.attr("text-anchor", "middle")
				.style("font-family", "Calibri Light")
				.style("font-size", 17)
				.style("font-weight", "bold")
				.text("Events Trend By District - North");
		svg2.selectAll(".line") //Delete the not relevant lines
		    .data(sumstat)
		    .enter()
		    .append("path")
			.attr("fill", "#FFFFE0")
			.attr("stroke", "#FFFFE0")
			.attr("stroke-width", 3)
			.attr("d", function(d){
			  return d3.line()
				.x(function(d) { return x(d.EventMonth); })
				.y(function(d) { return y(+d.Events); })
				(d.values)
			});
		svg2.selectAll("dot") //Delete the not relevant dots	
			.data(data)			
			.enter().append("circle")								
			.attr("r", 3)
			.attr("fill", "#FFFFE0")
			.attr("stroke", "#FFFFE0")
			.attr("cx", function(d) { return x(d.EventMonth); })		 
			.attr("cy", function(d) { return y(d.Events); })	;
		svg2.selectAll(".line") //Add only the line of 'North' group
		    .data(sumstat)
		    .enter()
		    .append("path")
			.attr("fill", "none")
			.attr("stroke", function(d){ return color('North') })
			.attr("stroke-width", 1.5)
			.attr("d", function(d){
			  return d3.line()
				.x(function(d) { return x(d.EventMonth); })
				.y(function(d) { return y(+d.Events); })
				(data.filter(function(d){return d.District=='North'}))
				
			})	
	break;		
	case 'default': //default case was pushed
		//Graph main title
		svg2.append("text")
			.attr("id", "graphTitle")
			.attr("x", width-210)
			.attr("y", height-340)
			.attr("text-anchor", "middle")
			.style("font-family", "Calibri Light")
			.style("font-size", 17)
			.style("font-weight", "bold")
			.text("Events Trend By District");
		svg2.selectAll(".line")
		    .data(sumstat)
		    .enter()
		    .append("path")
			.attr("fill", "none")
			.attr("stroke", function(d){ return color(d.key) })
			.attr("stroke-width", 1.5)
			.attr("d", function(d){
			  return d3.line()
				.x(function(d) { return x(d.EventMonth); })
				.y(function(d) { return y(+d.Events); })
				(d.values)
			})
		svg2.selectAll("dot")	
			.data(data)			
			.enter().append("circle")								
			.attr("r", 3)
			.attr("fill", function(d){ return color(d.District)})
			.attr("cx", function(d) { return x(d.EventMonth); })		 
			.attr("cy", function(d) { return y(d.Events); })	
			.on("mouseover", mouseover)				
			.on("mouseleave", mouseleave);
	break;
	}; //switch

	//Legend
			//Legend circles
            svg2.selectAll("circles")
              .data(variables)
              .enter()
              .append("circle")
			  
              .attr("cx", width-40)
              .attr("cy", function(d,i){ return i*15+10})
              .attr("r", 3)
              .style("fill", function(d){ return colors(d)});

			//Legend labels
            svg2.selectAll("labels")
              .data(variables)
              .enter()
              .append("text")
              .attr("x", width-20)
			  .attr("y", function(d,i){ return i*15+10})
              .style("fill", function(d,i){ return colors(d)})
              .text(function(d){ return d})
              .attr("text-anchor", "left")
			  .style("font-family", "Calibri Light")
              .style("alignment-baseline", "middle")
			  .style("font-weight", "bold")
              .style("font-size", "10px");  
			  
			//Legend frame
			svg2.selectAll("frame")
				.data(variables)
				.enter()
				.append("rect")
				.attr("x", width-50)
				.attr("y", height-320)
				.attr("width", 101)
				.attr("height", 110)
				.style("stroke", "black")
				.style("fill", "none");
				
})
}//lineChart


//*****************************************************************************************************************************************
//*****************************************************************************************************************************************
	
function scatter() {
var margin = {top: 80, right: 70, bottom: 70, left: 90},
    width = 600 - margin.left - margin.right,
    height = 470 - margin.top - margin.bottom;
	
	
//Append the svg object to the body of the page
var svg2 = d3.select("#svg2")
  .append("svg")
    .attr("width", width + 200)
    .attr("height", height + margin.top + margin.bottom)
	.append("g")
    .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")")
//Main title
	svg2.append("text")
			.attr("x", width-200)
			.attr("y", height-335)
			.attr("text-anchor", "middle")
			.style("font-family", "Calibri Light")
			.style("font-size", 17)
			.style("font-weight", "bold")
			.text("Total Events Breakdown");
//Read the data
d3.csv("Events_for_Scatter.csv", function(data) {

  //Add X axis
  var x = d3.scaleBand()
    .domain(data.map(d => d.EventParent))
    .range([ 0, width ])
	
  svg2.append("g")
    .attr("transform", "translate(0," + height + ")")
	.call(d3.axisBottom(x).tickSizeOuter(0).tickPadding(15))

  //Add Y axis
  var y = d3.scaleLinear()
	  .domain([0, 45000])
	  .range([ height, 0])
      .nice();
	svg2.append("g")
      .call(d3.axisLeft(y)
	  .ticks(5));

  //Add X axis label
  svg2.append("text")
      .attr("text-anchor", "middle")
      .attr("x", (width / 2))
      .attr("y", height+40)
	  .style("font-family", "Calibri Light")
	  .style("font-size", 13)
	  .style("font-weight", "bold")
      .text("Event Type");

  //Add Y axis label
  svg2.append("text")
      .attr("text-anchor", "end")
      .attr("transform", "rotate(-90)")
      .attr("y", -margin.left+45)
	  .attr("x", -margin.top-60)
	  .style("font-family", "Calibri Light")
	  .style("font-size", 13)
	  .style("font-weight", "bold")
      .text("Qty of Events");

  //Color scale for the event area
  var variables = ["Open Areas","Transportation","Underground","Urban","Transport","Unknown","Security"];
  var colors = d3.scaleOrdinal()
    .domain(variables)
    .range(["#24ff24", "#006ddb", "#40E0D0","#b66dff","#db6d00","#DC143C","#924900"])
	
  //Create the tooltip
  var tooltip = d3.select("#svg2")
		.append("div")
		.style("opacity", 0)
		.attr("class", "tooltip")
		.style("position", "absolute")
		.style("background-color", "#fed976")
		.style("padding", "8px")
		.style("font-size", "15px")
		.style("font-weight", "bold")
		.style("font-family", "Calibri Light") 
		.style("pointer-events", "none");

  //Hover on
  //Create the tooltip + hover (highlight a specific subgroup when hovered)
  var mouseover = function(d) {
 //The tooltip with the data
  tooltip
		.html("Event area: " + d.EventParent  + "<br/>  Event Type: " + d.EventChild + "<br/>Number Of Events: " + d.Events + "</br>'" + d.EventChild + "' events are " + d.PercOfTotal + " of grand total events")	
        .style("opacity", 1)
		.style("left", event.clientX-80 + "px")
		.style("top", event.clientY+220 +"px");
  //Highlight the specific data that the mouse is standing on with black frame
  d3.select(this)
		.transition()
		.duration(100)
		.style("stroke-width", "5px");
    }//function mouseover
	
  //Hover off
  var mouseleave = function(d) {
  tooltip
		.style("opacity", 0);
  //Removes the black frame
  d3.select(this)
		.transition()
		.duration(100)
		.style("stroke-width", "3px")
  }//function mouseleave
  
  //Add dots
  svg2.append('g')
    .selectAll("dot")
    .data(data)
    .enter()	
    .append("circle")
      .attr("cx", function (d) { return x(d.EventParent) +40; } )
      .attr("cy", function (d) { return y(d.Events); } )
      .attr("r", function(d) {  return (Math.sqrt(height - y(d.TotalEventsPerType)));})
	  .style("fill", "none")
      .style("stroke", function (d) {return colors(d.EventChild) } )
	  .style("stroke-width", "3px")
	.on("mouseover", mouseover)				
	.on("mouseleave", mouseleave);
	
	//Legend circles
    svg2.selectAll("circles")
              .data(variables)
              .enter()
              .append("circle")
              .attr("cx", width-12)
              .attr("cy", function(d,i){ return i*15})
              .attr("r", 3)
              .style("fill", function(d){ return colors(d)});

	//Legend labels
    svg2.selectAll("labels")
              .data(variables)
              .enter()
              .append("text")
              .attr("x", width-2)
			  .attr("y", function(d,i){ return i*15})
              .style("fill", function(d,i){ return colors(d)})
              .text(function(d){ return d})
              .attr("text-anchor", "left")
			  .style("font-family", "Calibri Light")
              .style("alignment-baseline", "middle")
			  .style("font-weight", "bold")
              .style("font-size", "10px");
			  
	//Legend frame
	svg2.selectAll("frame")
			.data(variables)
			.enter()
			.append("rect")
			.attr("x", width-25)
			.attr("y", height-330)
			.attr("width", 101)
			.attr("height", 110)
			.style("stroke", "black")
			.style("fill", "none");
			
	//Circle size explanation
	svg2.append("text")
			.attr("x", width-25)
			.attr("y", height-200)
			.attr("text-anchor", "right")
			.style("font-family", "Calibri Light")
			.style("font-size", 12)
			.text("Total 112,277 events, circle ");
			
	//Circle size explanation #2
	svg2.append("text")
			.attr("x", width-25)
			.attr("y", height-190)
			.attr("text-anchor", "right")
			.style("font-family", "Calibri Light")
			.style("font-size", 12)
			.text("size represents the % from ");
			
	//Circle size explanation #3
	svg2.append("text")
			.attr("x", width-25)
			.attr("y", height-180)
			.attr("text-anchor", "right")
			.style("font-family", "Calibri Light")
			.style("font-size", 12)
			.text("the grand total.");

})//csv
}//scatter
</script>